# 클라우드 환경 정리 (실무 예시 포함)

## 1. 클라우드 환경 개요

### 정의
클라우드 환경은 인터넷을 통해 **서버, 스토리지, 네트워크, 데이터베이스, 소프트웨어** 등의 자원을 필요할 때 즉시 사용할 수 있도록 제공하는 환경이다.

### 사용 이유
- 초기 장비 구매 비용 없이 빠른 서비스 운영 가능
- 글로벌 확장 및 빠른 배포
- 유지보수 부담 감소

### 장점 & 단점
**장점**  
- 사용량 기반 과금 (Pay-as-you-go)  
- 빠른 확장성 (Auto Scaling)  
- 고가용성 (HA 보장, 여러 리전 활용)  
- 다양한 연계 서비스 제공  

**단점**  
- 보안/개인정보 유출 위험  
- 대규모 서비스 운영 시 비용 증가 가능  
- 특정 벤더 종속성(Vendor Lock-in) 발생  

### 실무 필요 역량
- AWS, GCP, Azure 등 **클라우드 콘솔/CLI** 활용 능력  
- **Docker/Kubernetes**와 같은 컨테이너 운영 능력  
- CI/CD, 모니터링, 로깅 등 DevOps 파이프라인 경험  

---

## 2. 클라우드 종류

### 클라우드 서비스 모델
클라우드 서비스는 제공 범위에 따라 크게 **IaaS, PaaS, SaaS**로 나눌 수 있다. 각각은 개발자나 기업이 원하는 수준에서 인프라를 직접 제어할지, 아니면 플랫폼이나 소프트웨어 수준에서 활용할지를 결정하는 기준이 된다.  

- **IaaS (Infrastructure as a Service)**  
  - 서버, 스토리지, 네트워크 같은 **하드웨어 인프라를 가상화하여 제공**하는 모델  
  - 사용자는 VM 운영체제, 미들웨어, 애플리케이션을 직접 관리해야 한다.  
  - 장점: 세밀한 제어 가능, 유연한 확장, 초기 비용 절감  
  - 단점: 관리 책임이 큼 (보안, 패치, OS 관리 등)  
  - 예시: AWS EC2, GCP Compute Engine, Azure VM  

- **PaaS (Platform as a Service)**  
  - 개발자가 코드 작성에만 집중할 수 있도록 **플랫폼(런타임 환경, DB, 미들웨어 포함)을 제공**하는 모델  
  - 서버 관리나 OS 업데이트는 클라우드 제공자가 알아서 처리  
  - 장점: 빠른 개발 및 배포, 운영 부담 최소화  
  - 단점: 특정 벤더 종속성 가능, 세부 제어 한계  
  - 예시: AWS Elastic Beanstalk, GCP App Engine  

- **SaaS (Software as a Service)**  
  - 소프트웨어를 설치하지 않고 **웹 브라우저/앱을 통해 바로 사용하는 서비스**  
  - 사용자는 서비스 기능만 활용하면 되고, 인프라/운영은 제공자가 관리  
  - 장점: 접근성 높음, 유지보수 불필요  
  - 단점: 커스터마이징 한계  
  - 예시: Google Workspace, Slack, Dropbox  
---

### Docker
- **정의**: Docker는 애플리케이션과 실행 환경(라이브러리, 의존성, 설정 파일 등)을 하나의 **컨테이너(Container)** 로 패키징하여 어디서든 동일하게 실행할 수 있게 하는 기술이다.  

- **왜 사용하는가?**  
  - 개발 환경과 배포 환경 간의 차이를 최소화  
  - 서버 확장이 필요할 때 동일한 컨테이너 이미지를 여러 서버에 신속히 배포 가능  
  - 운영체제에 독립적이므로 Windows, Linux, Mac 어디서나 실행 가능  

- **어떻게 적용하는가?**  
  1. 애플리케이션 소스코드를 `Dockerfile` 로 정의 (의존성, 실행 명령어 포함)  
  2. `docker build` 로 이미지를 생성  
  3. `docker run` 으로 컨테이너 실행  
  4. 필요시 `docker-compose` 를 사용해 여러 컨테이너(DB, App 등)를 동시에 관리  

- **장점**  
  - OS 독립적인 실행 가능  
  - 빠른 배포 및 확장 용이  
  - 개발-테스트-운영 환경 차이를 최소화  

---

## AWS EC2

### 특징
AWS EC2(Amazon Elastic Compute Cloud)는 AWS에서 제공하는 **가상 서버(인스턴스)** 서비스로, 사용자가 원하는 OS, CPU, 메모리, 스토리지를 선택해 배포할 수 있다.  

- **가상 서버 인스턴스 제공**  
  - Ubuntu, Amazon Linux, Windows 등 다양한 OS 지원  
  - 필요에 따라 인스턴스 타입 선택 (예: t3.micro = 무료, m5.large = 고성능)  

- **스토리지 연동**  
  - EBS(Elastic Block Store)를 활용해 인스턴스와 분리된 디스크 제공  
  - 인스턴스 종료 후에도 데이터 유지 가능  

- **확장성**  
  - Auto Scaling 그룹을 통해 트래픽 증가 시 인스턴스 자동 증설  
  - Elastic Load Balancer(ELB)와 연동해 부하 분산  

- **보안 관리**  
  - Security Group으로 인스턴스 접근 제어 (예: 22번 포트만 SSH 허용)  
  - IAM(Identity & Access Management)과 연계해 세부 권한 관리  

### 왜 사용하는가?
- **온프레미스(직접 서버 구매/운영) 대비 초기 비용 절감**  
- **필요한 시점에 즉시 서버 생성 가능 (온디맨드)**  
- **글로벌 리전/가용영역(AZ) 분산 배치로 안정성 확보**  
- **다른 AWS 서비스(RDS, S3, Lambda 등)와의 통합 용이성**  

### 어떻게 적용하는가?
1. AWS 콘솔에서 EC2 인스턴스 생성 (AMI, 인스턴스 타입, 키페어 선택)  
2. 보안 그룹(Security Group) 설정 (필요한 포트만 열기)  
3. 키페어(`.pem` 파일)로 SSH 접속  
4. 원하는 애플리케이션/서비스 설치 후 배포  

### 기본 CLI 명령어 예시
```bash
# EC2 인스턴스 접속
ssh -i mykey.pem ubuntu@<EC2_PUBLIC_IP>

# 패키지 업데이트
sudo apt update && sudo apt upgrade -y
```
## 4. GCP

### 특징
- **Compute Engine**: VM 제공 (AWS EC2와 유사)  
- **App Engine**: 서버리스 환경  
- **BigQuery**: 대용량 데이터 분석  
- **Cloud Storage**: 객체 스토리지  

### 기본 CLI 명령어 예시
```bash
# GCP 프로젝트 설정
gcloud config set project <PROJECT_ID>

# VM 인스턴스 생성
gcloud compute instances create my-instance \
  --zone=asia-northeast3-a \
  --machine-type=e2-medium \
  --image-family=debian-11 \
  --image-project=debian-cloud
```

## 5. AWS EC2 + Docker
시나리오

웹 애플리케이션을 Docker로 컨테이너화한 뒤, AWS EC2에 배포한다.

### 단계별 실습
#### 1. EC2 인스턴스 생성 & 접속
```bash
ssh -i mykey.pem ubuntu@<EC2_PUBLIC_IP>
```

#### 2. Docker 설치

```bash
# Docker 설치
sudo apt update
sudo apt install docker.io -y

# Docker 실행 권한 부여
sudo usermod -aG docker ubuntu
```

#### 3. 애플리케이션 빌드 & 실행
```bash
# 소스 코드 클론
git clone https://github.com/example/myapp.git
cd myapp

# Docker 이미지 빌드
docker build -t myapp:latest .

# 컨테이너 실행
docker run -d -p 8080:8080 myapp:latest
```
#### 4. Docker Compose 예시
```yml
version: '3'
services:
  app:
    image: myapp:latest
    ports:
      - "8080:8080"
  db:
    image: mysql:8
    environment:
      MYSQL_ROOT_PASSWORD: root
      MYSQL_DATABASE: mydb

```

#### 5. 배포 확인
```bash
curl http://<EC2_PUBLIC_IP>:8080

```

#### 결과
- AWS EC2가 서버 환경을 제공
- Docker가 실행 환경을 컨테이너화
- 개발 → 배포까지 일관된 환경 유지 가능